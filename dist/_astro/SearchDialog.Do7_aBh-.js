import"./disclose-version.DsnmJJEf.js";import{o as U}from"./index-client.CzQ_vdHK.js";import{a1 as X,K as _,a2 as Y,h as Z,o as $,a3 as ee,a4 as te,l as re,c as z,z as ae,u as se,g as r,s as I,d as o,b as k,r as s,a5 as oe,a as x,p as de,j as le,k as ie,f as y,a6 as ne,t as F}from"./template.ClfEEacE.js";import{s as E}from"./render.jEvcDVTa.js";import{i as N}from"./if.Ci02lZ5e.js";import{e as ce}from"./each.7ZmHWwGo.js";import{r as ve,s as ue}from"./attributes.DwTLSe1l.js";import{d as fe}from"./events.b8Cd57np.js";import{b as pe}from"./this.BZcTew8Z.js";import{u as w}from"./ui.svelte.D6nUBpde.js";function me(e,l,b=l){var d=new WeakSet;X(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=K(e)?M(a):a,b(a),_!==null&&d.add(_),await Y(),a!==(a=l())){var g=e.selectionStart,n=e.selectionEnd,u=e.value.length;if(e.value=a??"",n!==null){var c=e.value.length;g===n&&n===u&&c>u?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=g,e.selectionEnd=Math.min(n,c))}}}),(Z&&e.defaultValue!==e.value||$(l)==null&&e.value)&&(b(K(e)?M(e.value):e.value),_!==null&&d.add(_)),ee(()=>{var i=l();if(e===document.activeElement){var a=te??_;if(d.has(a))return}K(e)&&i===M(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function K(e){var l=e.type;return l==="number"||l==="range"}function M(e){return e===""?null:+e}var xe=y('<div class="p-12 text-center"><p class="text-xs font-bold uppercase tracking-[0.2em] text-muted-foreground">Start typing to search...</p></div>'),be=y('<div class="p-12 text-center"><p class="text-xs font-bold uppercase tracking-[0.2em] text-muted-foreground"> </p></div>'),ge=y('<a class="block p-4 sm:p-5 rounded-xl hover:bg-accent transition-all no-underline group"><div class="flex items-start justify-between gap-4"><div class="min-w-0"><h3 class="text-sm sm:text-base font-bold text-foreground group-hover:text-primary transition-colors mb-1"> </h3> <p class="text-xs sm:text-sm text-muted-foreground line-clamp-1 opacity-80"> </p></div> <span class="text-[10px] font-bold uppercase tracking-widest text-muted-foreground"> </span></div></a>'),he=y('<div class="space-y-1"></div>'),_e=y('<div class="fixed inset-0 z-[100] flex items-start justify-center pt-8 sm:pt-24 px-4 bg-black/40 backdrop-blur-[4px] transition-all"><div class="w-full max-w-2xl bg-card border border-border rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200"><div class="flex items-center gap-3 p-4 sm:p-6 border-b border-border bg-background/50"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-6 sm:h-6 text-muted-foreground" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg> <input type="text" placeholder="Search research projects..." class="flex-1 bg-transparent border-none outline-none text-base sm:text-lg text-foreground placeholder:text-muted-foreground/40 font-medium"/> <button class="sm:hidden text-xs font-bold uppercase tracking-widest text-muted-foreground">Cancel</button></div> <div class="max-h-[60vh] sm:max-h-[400px] 3xl:max-h-[600px] overflow-y-auto p-2 sm:p-4"><!></div> <div class="hidden sm:flex items-center justify-between px-6 py-3 border-t border-border bg-secondary/30"><div class="flex items-center gap-6"><div class="flex items-center gap-2"><kbd class="px-1.5 py-0.5 text-xs font-bold bg-background border border-border rounded shadow-sm">⏎</kbd> <span class="text-xs font-bold uppercase tracking-widest text-muted-foreground">to select</span></div> <div class="flex items-center gap-2"><kbd class="px-1.5 py-0.5 text-xs font-bold bg-background border border-border rounded shadow-sm">↑↓</kbd> <span class="text-xs font-bold uppercase tracking-widest text-muted-foreground">to navigate</span></div></div> <div class="flex items-center gap-2"><kbd class="px-1.5 py-0.5 text-xs font-bold bg-background border border-border rounded shadow-sm">esc</kbd> <span class="text-xs font-bold uppercase tracking-widest text-muted-foreground">to close</span></div></div></div></div>');function Ke(e,l){re(l,!0);let b=z(ae([])),d=z(""),i=ne(()=>r(d).length>0?r(b).filter(t=>t.title.toLowerCase().includes(r(d).toLowerCase())||t.description.toLowerCase().includes(r(d).toLowerCase())):[]),a=z(void 0);se(()=>{w.isSearchOpen&&r(a)&&setTimeout(()=>r(a)?.focus(),10)});function g(t){t.key==="Escape"&&w.closeSearch()}U(()=>(window.addEventListener("keydown",g),(async()=>{try{const t=await fetch("/api/search.json");t.ok&&I(b,await t.json(),!0)}catch(t){console.error("Failed to load search index:",t)}})(),()=>window.removeEventListener("keydown",g)));var n=_e();n.__click=()=>w.closeSearch();var u=o(n);u.__click=t=>t.stopPropagation();var c=o(u),S=k(o(c),2);ve(S),pe(S,t=>I(a,t),()=>r(a));var O=k(S,2);O.__click=()=>w.closeSearch(),s(c);var V=k(c,2),P=o(V);{var T=t=>{var j=xe();x(t,j)},W=t=>{var j=le(),A=ie(j);{var G=f=>{var v=be(),p=o(v),m=o(p);s(p),s(v),F(()=>E(m,`No results found for "${r(d)??""}"`)),x(f,v)},H=f=>{var v=he();ce(v,21,()=>r(i),p=>p.id,(p,m)=>{var h=ge();h.__click=()=>w.closeSearch();var q=o(h),C=o(q),L=o(C),J=o(L,!0);s(L);var B=k(L,2),Q=o(B,!0);s(B),s(C);var D=k(C,2),R=o(D,!0);s(D),s(q),s(h),F(()=>{ue(h,"href",r(m).url),E(J,r(m).title),E(Q,r(m).description),E(R,r(m).kind)}),x(p,h)}),s(v),x(f,v)};N(A,f=>{r(i).length===0?f(G):f(H,!1)},!0)}x(t,j)};N(P,t=>{r(d).length===0?t(T):t(W,!1)})}s(V),oe(2),s(u),s(n),me(S,()=>r(d),t=>I(d,t)),x(e,n),de()}fe(["click"]);export{Ke as default};
